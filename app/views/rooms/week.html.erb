<p id="notice"><%= notice %></p>


<div id = "time">

  <tr>
    <td class="change"><%= link_to "Back 7 days", start_date: @week_range.first - 7.day %></td>
    <td class="change"><%= link_to "Forward 7 days", start_date: @week_range.last + 7.day %></td>
  </tr>


</div>

<table id=“bookingTable”>
  <thead>
    <tr>
      <th>Time</th>
      <!-- Creates the columns for each room -->
      <% @week_range.each do |day| %>
          <th class=“Days”><%= day %> <%= I18n.t("date.day_names")[day.wday] %></th>
      <% end %>
    </tr>


<<<<<<< HEAD
      <% inbetween =  false %>
=======
<% @week_range.each do |day| %>
  <!-- Creates the table and places bookings into the correct time and room -->
  <table id = "weekBookingTable">
    <thead>
      <th id="weekDay"><%= I18n.t("date.abbr_day_names")[day.wday] %></th>
      <tr>
        <th>Time</th>
        <!-- Creates the columns for each room -->
        <% @rooms.each do |room| %>
            <th class="<%= room.name %>"><%= link_to room.name, room %></th>
        <% end %>
      </tr>
        <% roomName = '' %>
        <% inbetween =  false %>
        <% booked = false %>
        <!-- if the time is on the hour -->
        <% i = 8.00 %>
        <% 41.times do |x| %>
          <tr>
              <!-- Places the times on the left most column -->
            <td class="timeCell"><%= number_with_precision i, :precision => 2 %></td>
            <td></td>
              <% @rooms.each do |room| %>
              <!-- Goes into my @date_range array  -->
                  <!-- Selects bookings that have the same date as the date selected above the table -->
                    <% @bookings.select {|b| b.date_in.to_date == day}.each do |meeting| %>
                        <% if i > meeting.date_in.strftime("%H.%M").to_f && i < meeting.date_out.strftime("%H.%M").to_f && meeting.room.name == room.name %>
                          <% booked = true %>
                          <td id="done"><%= link_to meeting.description, meeting %></td>
>>>>>>> 2a35e6d8722b91373741a25c11be38b0acec3054

      <!-- if the time is on the hour -->
      <% bookingDescription = "" %>
      <% booked = true %>
      <% i = 8.00 %>
      <% while i.to_f <= 18.00 %>
        <tr>
            <!-- Cells with time in -->
          <td class=“timeCell”><%= number_with_precision i, :precision => 2 %></td>
            <% @week_range.each do |day| %>
            <!-- Creates table cell. If there is a booking puts booking information -->
            <td>
              <% @bookings.select {|b| b.date_in.to_date == day}.each do |booking| %>
                <% if i > booking.date_in.strftime("%H.%M").to_f && i < booking.date_out.strftime("%H.%M").to_f %>
                <% bookingDescription = booking.description %>
                <div style="background-color: <%= booking.room.color %>"><%= link_to booking.description, booking %></div>
              <% end %>
            <% end %>
          </td>
            <% end %>
          <!-- if statement to show correct time in left column -->
          <% if i.modulo(1).round(2) == 0.45 %>
            <% i += 0.55 %>
          <% else %>
            <% i += 0.15 %>
          <% end %>
        </tr>
      <% end %>
      <th colspan=“3”></th>
    </tr>
  </thead>
</table>




<br>

<footer>
  <!-- new booking form -->
  <%= render '/bookings/form', booking: @booking %>
</footer>
