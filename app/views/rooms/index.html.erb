<p id="notice"><%= notice %></p>

<% days = ["Sunday","Monday","Tuesday","Wednesday", "Thursday", "Friday", "Saturday"] %>

<div id = "time">
  <!-- Allows you to cycle through daily bookings -->
  <tr>
    <td class="change"><%= link_to "Previous day", start_date: @date_range.first - 1.day %></td>
    <td class="change"><%= link_to "Next Day", start_date:@date_range.last + 1.day %></td>
  </tr>
    <br>
  <tr>
    <td class="change"><%= link_to "Back 7 days", start_date: @date_range.first - 7.day %></td>
    <td class="change"><%= link_to "Forward 7 days", start_date: @date_range.first + 7.day %></td>
  </tr>

  <!-- makes table to show day view -->
  <table id="fixedDay">
    <thead>
      <tr>
        <!-- Abbreviates the names of the week -->
        <% @date_range.slice(0,7).each do |day| %>
        <th><%= I18n.t("date.abbr_day_names")[day.wday] %></th>
        <th><% @date_range.each_slice(7) do |week|  %>
            <% week.each do |day| %>
              <%= day %>
            <% end %>
          <% end %>
        </th>
        <% end %>
      </tr>
    </thead>
  </table>
</div>



  <h1 id="roomsIndexHeader">Rooms</h1>

  <!-- Creates the table and places bookings into the correct time and room -->
  <table id = "bookingTable">
    <thead>
      <tr>
        <th>Time</th>
        <!-- Creates the columns for each room -->
        <% days.each do |day| %>
          <th class=“Days”><%= day %></th>
        <% end %>
      </tr>
        <% roomName = '' %>
        <% inbetween =  false %>
        <% booked = false %>
      <% i = 9.00%>
      <% 17.times do |x| %>
        <tr>
          <% if i.to_f % 1 ==0%>
            <!-- Places the times on the left most column -->
            <td class=“timeCell”><%= number_with_precision i, :precision => 2 %></td>
            <% days.each do |day| %>
            <!-- Goes into my date_range array  -->
            <td></td>
            <% end %>
            <!-- increments the time by half an hour for the next iteration of the loop -->
            <% i += 0.3 %>
          <% else %>
          <td class=“timeCell”> <%=  number_with_precision i, :precision => 2  %></td>
          <% days.each do |day| %>
            <td></td>
          <% end %>
          <!-- increments the time by half an hour for the next iteration of the loop -->
          <% i += 0.7 %>
        <% end %>
        </tr>
      <% end %>
      <th colspan=“3”></th>
      </tr>
    </thead>
  </table>

<table>
  <tr id = "roomNames">
    <% @rooms.each do |room| %>
    <td><%= room.name %></td>
    <% end %>
  </tr>
</table>
<!-- Shows all bookings -->
<h1>Rooms</h1>
<% @rooms.each do |room| %>
   <td id="rooms"><%= room.name %></td>
<% end %>
<br>
<%= link_to 'Create a new room', new_room_path, :class => "btn btn-info", :role => "button" %>

<% @rooms.order(created_at: :ASC).each do |room| %>
  <p class="nameOfRoomInShow">
    <strong><%= room.name %></strong>
    <%= link_to 'Edit', edit_room_path(room) %>
    <td id="deleteRoom">
      <%= link_to 'Delete', room, method: :delete, data: { confirm: 'Are you sure?' } %>
    </td>
  </p>

  <h3>Bookings</h3>

  <table>
     <thead>
       <tr>
         <th>Description</th>
         <th>Start Time</th>
         <th>End Time</th>
       </tr>
     </thead>

     <!-- loops through to show booking information for the room -->
     <tbody>
       <% room.bookings.order(date_in: :ASC).each do |booking|  %>
         <tr>
           <td><%= booking.description  %></td>
           <td><%= booking.date_in.to_time.strftime('%a %e %B %Y %H:%M')  %></td>
           <td><%= booking.date_out.to_time.strftime('%a %e %B %Y %H:%M')  %></td>
           <td><%= link_to 'Edit', edit_booking_path(booking) %> </td>
           <td id="deleteBooking">
             <%= link_to 'Delete Booking', booking, method: :delete, data: { confirm: 'Are you sure?' } %>
           </td>
         </tr>
         <% end %>
     </tbody>
  </table>
<% end %>

<br>

<footer>
  <!-- new booking form -->
  <%= render '/bookings/form', booking: @booking %>
</footer>
